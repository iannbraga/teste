<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Luciana Empadas</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />

    <style>
        /* Criar um botão flutuante para o carrinho */
        .cart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#!">Luciana Empadas</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation"><span
                        class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="#!">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!">Sobre</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Header-->
        <header class="bg-dark py-5">
            <div class="container px-4 px-lg-5 my-5">
                <div class="text-center text-white">
                    <h1 class="display-4 fw-bolder">Empadas e doces feitos com carinho</h1>
                    <p class="lead fw-normal text-white-50 mb-0">Pronta entrega na 603 Sul</p>
                </div>
            </div>
        </header>

        <!-- Section-->
        <section class="py-5">
            <div class="container px-4 px-lg-5 mt-5">
                <div
                    class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 justify-content-center">
                    <div class="col mb-5" v-for="product in products" :key="product.id">
                        <div class="card h-100 position-relative">
                            <!-- Sale badge -->
                            <div v-if="product.sale" class="badge bg-dark text-white position-absolute"
                                style="top: 0.5rem; right: 0.5rem">Sale</div>
                            <!-- Product image -->
                            <img class="card-img-top" :src="product.image" alt="..." />
                            <!-- Product details -->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name -->
                                    <h5 class="fw-bolder">{{ product.name }}</h5>
                                    <!-- Product reviews -->
                                    <div v-if="product.stars"
                                        class="d-flex justify-content-center small text-warning mb-2">
                                        <i v-for="star in 5" :key="star"
                                            :class="star <= product.stars ? 'bi-star-fill' : 'bi-star'"></i>
                                    </div>
                                    <!-- Product price -->
                                    <div>
                                        <span v-if="product.oldPrice"
                                            class="text-muted text-decoration-line-through">${{
                                            product.oldPrice.toFixed(2) }}</span>
                                        <span> ${{ product.price.toFixed(2) }}</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Product actions -->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center">
                                    <button class="btn btn-outline-dark mt-auto" @click="addToCart(product)">Add to
                                        cart</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rodapé -->
        <footer class="bg-light text-center text-lg-start text-muted" style="padding: 40px 0;">
            <div class="container">
                <div class="row">
                    <!-- Sobre -->
                    <div class="col-md-4 mb-4">
                        <h5 class="text-uppercase fw-bold mb-3">Luciana Empadas</h5>
                        <p>Servindo com amor desde 2020. Comida feita com ingredientes frescos e muito carinho.</p>
                    </div>

                    <!-- Links úteis -->
                    <div class="col-md-4 mb-4">
                        <h5 class="text-uppercase fw-bold mb-3">Navegação</h5>
                        <ul class="list-unstyled">
                            <li><a href="#" class="text-reset text-decoration-none">Início</a></li>
                            <li><a href="#" class="text-reset text-decoration-none">Cardápio</a></li>
                            <li><a href="#" class="text-reset text-decoration-none">Contato</a></li>
                            <li><a href="#" class="text-reset text-decoration-none">Sobre nós</a></li>
                        </ul>
                    </div>

                    <!-- Contato -->
                    <div class="col-md-4 mb-4">
                        <h5 class="text-uppercase fw-bold mb-3">Contato</h5>
                        <p><i class="bi bi-telephone-fill me-2"></i> (11) 1234-5678</p>
                        <p><i class="bi bi-geo-alt-fill me-2"></i> Rua Exemplo, 123 - Centro</p>
                        <div>
                            <a href="#" class="me-3 text-reset"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="me-3 text-reset"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="me-3 text-reset"><i class="bi bi-whatsapp"></i></a>
                        </div>
                    </div>
                </div>
                <hr>
                <p class="text-center text-muted mb-0">© 2025 Nome do Restaurante. Todos os direitos reservados.</p>
            </div>
        </footer>



        <!-- Cart Modal -->
        <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true"
            ref="cartModal">
            <div class="modal-dialog modal-dialog-scrollable modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="cartModalLabel">Carrinho</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                    </div>
                    <div class="modal-body" v-if="cart.length > 0">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Qtd</th>
                                    <th>Preço Unit.</th>
                                    <th>Total</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="item in cart" :key="item.product.id">
                                    <td>{{ item.product.name }}</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-secondary me-1"
                                            @click="decrementQuantity(item.product)">-</button>
                                        {{ item.quantity }}
                                        <button class="btn btn-sm btn-outline-secondary ms-1"
                                            @click="incrementQuantity(item.product)">+</button>
                                    </td>
                                    <td>${{ item.product.price.toFixed(2) }}</td>
                                    <td>${{ (item.product.price * item.quantity).toFixed(2) }}</td>
                                    <td><button class="btn btn-sm btn-danger"
                                            @click="removeFromCart(item.product)">X</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="text-end fw-bold fs-5">Total: ${{ cartTotalPrice.toFixed(2) }}</div>
                    </div>
                    <div class="modal-body" v-else>
                        <p>Seu carrinho está vazio.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continuar
                            comprando</button>
                        <button type="button" class="btn btn-success" @click="checkout"
                            :disabled="cart.length === 0">Finalizar via WhatsApp</button>
                    </div>
                </div>
            </div>
        </div>

        <form class="d-flex" @submit.prevent="openCartModal">
            <button class="btn btn-dark cart-button" type="submit">
                <i class="bi-cart-fill me-1"></i>
                Carrinho
                <span class="badge bg-dark text-white ms-1 rounded-pill">{{ cartTotalQuantity }}</span>
            </button>
        </form>
    </div>

    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

    <!-- Bootstrap core JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- script -->
    <script>
        const { createApp, ref, reactive, computed, onMounted } = Vue;

        createApp({
            setup() {
                const products = ref([
                    {
                        id: 1,
                        name: 'Empada',
                        price: 10.00,
                        oldPrice: 15.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/empada.png'
                    },
                    {
                        id: 2,
                        name: 'Mini Pizza',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/mini-pizza.png'
                    },
                    {
                        id: 3,
                        name: 'Torta',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/torta.png'
                    },
                    {
                        id: 4,
                        name: 'Pavê',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/pave 1.png'
                    },
                    {
                        id: 5,
                        name: 'Pavê',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/pave 4.png'
                    },
                    {
                        id: 6,
                        name: 'Pavê',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/pave 2.png'
                    },
                    {
                        id: 7,
                        name: 'Pavê',
                        price: 18.00,
                        oldPrice: 20.00,
                        sale: true,
                        stars: 5,
                        image: 'assets/images/pave 3.png'
                    },
                ]);

                const cart = reactive([]);

                // Computed total quantity in cart
                const cartTotalQuantity = computed(() =>
                    cart.reduce((total, item) => total + item.quantity, 0)
                );

                // Computed total price
                const cartTotalPrice = computed(() =>
                    cart.reduce((total, item) => total + item.product.price * item.quantity, 0)
                );

                // Add product to cart or increment quantity
                function addToCart(product) {
                    const found = cart.find(item => item.product.id === product.id);
                    if (found) {
                        found.quantity++;
                    } else {
                        cart.push({ product, quantity: 1 });
                    }
                }

                // Remove product from cart
                function removeFromCart(product) {
                    const index = cart.findIndex(item => item.product.id === product.id);
                    if (index > -1) {
                        cart.splice(index, 1);
                    }
                }

                // Increment quantity
                function incrementQuantity(product) {
                    const item = cart.find(i => i.product.id === product.id);
                    if (item) {
                        item.quantity++;
                    }
                }

                // Decrement quantity (remove if zero)
                function decrementQuantity(product) {
                    const item = cart.find(i => i.product.id === product.id);
                    if (item) {
                        if (item.quantity > 1) {
                            item.quantity--;
                        } else {
                            removeFromCart(product);
                        }
                    }
                }

                // Show Bootstrap modal via JS API
                let modalInstance = null;
                function openCartModal() {
                    if (!modalInstance) {
                        modalInstance = new bootstrap.Modal(document.getElementById('cartModal'));
                    }
                    modalInstance.show();
                }

                // Checkout via WhatsApp with message
                function checkout() {
                    if (cart.length === 0) return;
                    let message = 'Olá, gostaria de fazer o pedido:%0A';
                    cart.forEach(item => {
                        message += `${item.quantity} x ${item.product.name} - $${(item.product.price * item.quantity).toFixed(2)}%0A`;
                    });
                    message += `Total: $${cartTotalPrice.value.toFixed(2)}`;
                    const whatsappUrl = `https://wa.me/5511999999999?text=${message}`;
                    window.open(whatsappUrl, '_blank');
                }

                return {
                    products,
                    cart,
                    cartTotalQuantity,
                    cartTotalPrice,
                    addToCart,
                    removeFromCart,
                    incrementQuantity,
                    decrementQuantity,
                    openCartModal,
                    checkout
                };
            }
        }).mount('#app');
    </script>
</body>

</html>